<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>POULTRY Â· luxury dashboard</title>
  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:opsz@14..32&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    body {
      background-color: #0a0a0a; /* matte black */
      color: #f0f0f0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    /* mobile container */
    #app {
      width: 100%;
      max-width: 420px; /* typical mobile width */
      height: 780px;
      background: #0f0f0f;
      border-radius: 32px;
      overflow: hidden;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(212, 175, 55, 0.2);
      display: flex;
      flex-direction: column;
      position: relative;
    }

    /* glass panel base */
    .glass {
      background: rgba(30, 30, 30, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(212, 175, 55, 0.15);
      border-bottom: 1px solid rgba(212, 175, 55, 0.3);
      box-shadow: 0 8px 20px -6px rgba(0,0,0,0.6);
    }

    /* header */
    .header {
      padding: 18px 20px 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: transparent;
    }
    .header h1 {
      font-size: 1.6rem;
      font-weight: 500;
      letter-spacing: -0.5px;
      background: linear-gradient(135deg, #fff 0%, #d4af37 80%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .header i {
      font-size: 1.5rem;
      color: #d4af37;
      background: rgba(212, 175, 55, 0.1);
      padding: 10px;
      border-radius: 50%;
    }

    /* main scrollable content */
    .main-content {
      flex: 1;
      overflow-y: auto;
      padding: 12px 16px 80px 16px; /* bottom space for nav */
      scrollbar-width: thin;
      scrollbar-color: #d4af37 #1e1e1e;
    }
    .main-content::-webkit-scrollbar {
      width: 4px;
    }
    .main-content::-webkit-scrollbar-track {
      background: #1e1e1e;
    }
    .main-content::-webkit-scrollbar-thumb {
      background: #d4af37;
      border-radius: 8px;
    }

    /* bottom navigation â€“ TikTok style */
    .bottom-nav {
      position: absolute;
      bottom: 0;
      width: 100%;
      max-width: 420px;
      display: flex;
      justify-content: space-around;
      align-items: center;
      background: rgba(10, 10, 10, 0.9);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-top: 1px solid rgba(212, 175, 55, 0.3);
      padding: 8px 0 14px 0;
      z-index: 10;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #888;
      font-size: 0.7rem;
      transition: all 0.15s ease;
      cursor: pointer;
      padding: 6px 12px;
      border-radius: 30px;
      background: transparent;
    }
    .nav-item i {
      font-size: 1.5rem;
      margin-bottom: 2px;
    }
    .nav-item.active {
      color: #d4af37;
      background: rgba(212, 175, 55, 0.1);
      text-shadow: 0 0 8px #d4af3740;
    }

    /* cards & elements */
    .card {
      background: rgba(20, 20, 20, 0.6);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(212, 175, 55, 0.2);
      border-radius: 24px;
      padding: 18px 16px;
      margin-bottom: 16px;
      box-shadow: 0 10px 20px -10px black;
    }

    .card-title {
      font-size: 1rem;
      font-weight: 500;
      color: #d4af37;
      margin-bottom: 14px;
      letter-spacing: 0.3px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .stat {
      background: rgba(0, 0, 0, 0.4);
      border-radius: 18px;
      padding: 14px 12px;
      border-left: 3px solid #d4af37;
    }
    .stat-label {
      font-size: 0.75rem;
      color: #aaa;
      text-transform: uppercase;
      letter-spacing: 0.4px;
    }
    .stat-value {
      font-size: 1.5rem;
      font-weight: 600;
      color: white;
      line-height: 1.2;
    }
    .stat-sub {
      font-size: 0.8rem;
      color: #6b8e4c;
    }

    .badge {
      background: #6b8e4c20;
      border: 1px solid #6b8e4c;
      color: #b7d99e;
      padding: 4px 8px;
      border-radius: 40px;
      font-size: 0.7rem;
    }

    /* inventory rows */
    .batch-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #2a2a2a;
    }
    .batch-row:last-child { border: none; }
    .batch-info h4 { font-size: 1rem; font-weight: 500; }
    .batch-info p { font-size: 0.75rem; color: #aaa; }
    .batch-numbers { text-align: right; }
    .batch-numbers .quantity { color: #d4af37; font-weight: 600; }

    .btn-gold {
      background: #d4af3720;
      border: 1px solid #d4af37;
      color: #d4af37;
      border-radius: 40px;
      padding: 10px 18px;
      font-weight: 500;
      font-size: 0.9rem;
      width: fit-content;
      backdrop-filter: blur(4px);
      transition: 0.2s;
      cursor: pointer;
    }
    .btn-gold i { margin-right: 6px; }
    .btn-gold:active { background: #d4af3740; }

    /* simple chart bar */
    .chart-bar {
      background: #2b2b2b;
      height: 8px;
      border-radius: 20px;
      margin: 8px 0;
    }
    .bar-fill {
      height: 8px;
      background: linear-gradient(90deg, #d4af37, #f5e085);
      border-radius: 20px;
      width: 0%;
    }

    /* tab content â€” hidden by default, shown via JS */
    .tab-pane { display: none; }
    .tab-pane.active { display: block; }

    /* luxury small touches */
    .gold-text { color: #d4af37; }
    .green-text { color: #6b8e4c; }
    hr { border: 0.5px solid #2a2a2a; margin: 16px 0; }

    .cost-item { display: flex; justify-content: space-between; margin: 12px 0; font-size: 0.95rem; }

    /* new styles for input fields (keeps the same aesthetic) */
    .cost-input {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0;
    }
    .cost-input label {
      color: #ccc;
      font-size: 0.9rem;
    }
    .cost-input input {
      width: 100px;
      background: #2a2a2a;
      border: 1px solid #d4af3740;
      border-radius: 30px;
      padding: 8px 12px;
      color: #fff;
      font-size: 0.9rem;
      text-align: right;
    }
    .cost-input input:focus {
      outline: none;
      border-color: #d4af37;
    }
    .helper-text {
      font-size: 0.7rem;
      color: #aaa;
      margin-top: 4px;
    }
    .btn-small {
      background: transparent;
      border: 1px solid #d4af37;
      color: #d4af37;
      border-radius: 30px;
      padding: 6px 12px;
      font-size: 0.8rem;
      cursor: pointer;
      margin-right: 6px;
    }
    .btn-small.active {
      background: #d4af37;
      color: #0a0a0a;
    }
    .flex-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }
  </style>
</head>
<body>
<div id="app">
  <!-- header -->
  <div class="header">
    <h1>ğŸ” POULTRY</h1>
    <i class="fas fa-qrcode"></i>
  </div>

  <!-- main content area: tab panes -->
  <div class="main-content" id="mainContent">
    <!-- DASHBOARD PANE -->
    <div class="tab-pane active" id="dashboardPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-eye gold-text"></i> live overview</div>
        <div class="grid-2">
          <div class="stat"><span class="stat-label">chickens</span><div class="stat-value">2,450</div><span class="stat-sub">+200 today</span></div>
          <div class="stat"><span class="stat-label">sold today</span><div class="stat-value">128</div><span class="stat-sub">$896</span></div>
          <div class="stat"><span class="stat-label">lost</span><div class="stat-value">12</div><span class="stat-sub">â¬‡ï¸ 0.5%</span></div>
          <div class="stat"><span class="stat-label">revenue today</span><div class="stat-value">$1,280</div><span class="stat-sub">+18%</span></div>
        </div>
        <div style="margin-top: 16px;">
          <div style="display: flex; justify-content: space-between;"><span>ğŸ“† monthly revenue</span> <strong class="gold-text">$38,400</strong></div>
          <div class="chart-bar" style="margin:6px 0 12px;"><div class="bar-fill" style="width:76%"></div></div>
          <div style="display: flex; justify-content: space-between;"><span>ğŸ” remaining stock</span> <strong>2,322</strong></div>
          <div style="display: flex; justify-content: space-between;"><span>ğŸ“¦ upcoming batch</span> <strong>650 (in 4d)</strong></div>
          <hr>
          <div style="display: flex; justify-content: space-between; font-size: 1.1rem;"><span>ğŸ“ˆ profit est.</span> <strong class="green-text">$11,230</strong></div>
        </div>
      </div>
      <div class="card">
        <div class="card-title"><i class="fas fa-chart-line gold-text"></i> weekly trend</div>
        <div style="display: flex; gap: 10px; justify-content: space-between;">
          <span>M</span><span>T</span><span>W</span><span>T</span><span>F</span><span>S</span><span>S</span>
        </div>
        <div style="display: flex; gap: 8px; margin-top: 6px;">
          <div style="height: 40px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 30px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 50px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 36px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 60px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 44px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 38px; width: 12%; background: #aaa; border-radius: 12px;"></div>
        </div>
        <p class="badge" style="margin-top: 12px;"><i class="fas-regular fa-truck"></i> expansion: new farm in Q3</p>
      </div>

      <!-- NEW: Net Profit + 3â€‘Month Projection Card -->
      <div class="card" id="profitOverviewCard">
        <div class="card-title"><i class="fas fa-coins gold-text"></i> net profit & projection</div>
        <div class="grid-2">
          <div class="stat"><span class="stat-label">net monthly profit</span><div class="stat-value" id="netMonthly">$15,000</div></div>
          <div class="stat"><span class="stat-label">profit / chicken</span><div class="stat-value" id="profitPerChicken">$4.85</div></div>
        </div>
        <div style="display: flex; justify-content: space-between; margin: 8px 0;">
          <span>ğŸ“Š 3â€‘month projection</span>
          <strong class="gold-text" id="projectedProfit">$45,000</strong>
        </div>
        <div class="flex-row" style="margin: 10px 0;">
          <button class="btn-small" data-growth="10">+10% growth</button>
          <button class="btn-small" data-growth="20">+20%</button>
          <button class="btn-small" data-growth="30">+30%</button>
          <span class="helper-text" id="growthHint">simulate</span>
        </div>
        <p class="badge" id="profitTrend"><i class="fas fa-arrow-up"></i> profit trend: +5.2% vs last month</p>
      </div>
    </div>

    <!-- INVENTORY PANE -->
    <div class="tab-pane" id="inventoryPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-warehouse gold-text"></i> batch registration</div>
        <div class="batch-row">
          <div class="batch-info"><h4>#B2401 - Cornish</h4><p>purchased 12 Feb | 45 days</p></div>
          <div class="batch-numbers"><span class="quantity">820</span> / 850 <br> <span class="badge">lost 30</span></div>
        </div>
        <div class="batch-row">
          <div class="batch-info"><h4>#B2402 - Ross</h4><p>purchased 28 Feb | 32 days</p></div>
          <div class="batch-numbers"><span class="quantity">1,240</span> / 1,250 <br> <span class="badge">lost 10</span></div>
        </div>
        <div class="batch-row">
          <div class="batch-info"><h4>#B2403 - Free Range</h4><p>arriving 22 Mar</p></div>
          <div class="batch-numbers"><span class="quantity">0</span> / 600 <br> <span class="badge">upcoming</span></div>
        </div>
        <button class="btn-gold" style="margin-top: 16px; width:100%;"><i class="fas fa-plus"></i> register new batch</button>
        <p style="font-size:0.7rem; margin-top:12px;"><i class="fas fa-qrcode gold-text"></i> QR ready Â· scan to update deaths/sales</p>
      </div>
      <div class="card">
        <div class="card-title">âš°ï¸ death tracking (last 7d)</div>
        <p>Batch B2401: 12 deaths <span class="green-text">(-1.4%)</span></p>
        <p>Batch B2402: 8 deaths <span class="green-text">(-0.6%)</span></p>
        <p style="color:#d4af37;">recommend: check ventilation</p>
      </div>

      <!-- NEW: Growth Checkpoint Card -->
      <div class="card">
        <div class="card-title"><i class="fas fa-flag-checkered gold-text"></i> growth checkpoint</div>
        <div style="display: flex; justify-content: space-between;">
          <span>current profit level:</span>
          <strong class="gold-text" id="currentProfitLevel">R3 (15k)</strong>
        </div>
        <div style="display: flex; justify-content: space-between;">
          <span>next target:</span>
          <strong>R5 (30k)</strong>
        </div>
        <div class="chart-bar" style="margin:10px 0;"><div class="bar-fill" id="profitGapFill" style="width:50%"></div></div>
        <p id="gapText">gap to next level: $15,000</p>
        <ul style="margin-left:20px; color:#ccc; font-size:0.9rem;">
          <li>âœ“ increase sales volume</li>
          <li>âœ“ reduce feed waste</li>
          <li>â†’ add subscriptions</li>
        </ul>
      </div>
    </div>

    <!-- SALES PANE -->
    <div class="tab-pane" id="salesPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-dollar-sign gold-text"></i> today's sales</div>
        <div style="font-size: 2.2rem; font-weight:600;">128 <span style="font-size:1rem;">chickens</span></div>
        <p>avg price $7.00 â†’ $896 revenue</p>
        <hr>
        <div style="display:flex; gap:10px;">
          <div><span class="stat-label">this month</span><div class="stat-value">3,840</div></div>
          <div><span class="stat-label">last month</span><div class="stat-value">3,210</div></div>
        </div>
        <button class="btn-gold" style="margin-top:16px;"><i class="fas fa-plus"></i> add manual sale</button>
      </div>
      <div class="card">
        <div class="card-title"><i class="fas fa-chart-pie gold-text"></i> by customer type</div>
        <div>wholesale 68% <div class="chart-bar"><div class="bar-fill" style="width:68%"></div></div></div>
        <div>retail 22% <div class="chart-bar"><div class="bar-fill" style="width:22%"></div></div></div>
        <div>restaurant 10% <div class="chart-bar"><div class="bar-fill" style="width:10%"></div></div></div>
      </div>

      <!-- NEW: Revenue Breakdown Card -->
      <div class="card">
        <div class="card-title"><i class="fas fa-chart-simple gold-text"></i> revenue breakdown</div>
        <div class="cost-item"><span>ğŸ” live chickens</span> <span>$32,500</span></div>
        <div class="cost-item"><span>ğŸ— prepared</span> <span>$8,200</span></div>
        <div class="cost-item"><span>ğŸ“¦ bulk</span> <span>$12,400</span></div>
        <div class="cost-item"><span>ğŸ”„ byâ€‘products</span> <span>$2,100</span></div>
        <div class="cost-item"><span>ğŸŒ± manure sales</span> <span>$3,000</span></div>
        <div class="cost-item" style="border-top:1px solid #333;"><span>ğŸ’° total revenue</span> <span class="gold-text" id="totalRevenue">$58,200</span></div>
        <div class="cost-item"><span>ğŸ” revenue / chicken</span> <span id="revenuePerChicken">$18.97</span></div>
      </div>
    </div>

    <!-- LOGISTICS PANE -->
    <div class="tab-pane" id="logisticsPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-truck gold-text"></i> active deliveries</div>
        <div class="batch-row"><span>ğŸšš driver: Ahmed</span> <span class="badge">to city market</span></div>
        <div class="batch-row"><span>ğŸšš driver: Sara</span> <span class="badge">feed pickup</span></div>
        <div class="batch-row"><span>â›½ vehicle usage today</span> <span>54 km</span></div>
        <button class="btn-gold" style="width:100%;">assign new delivery</button>
      </div>
      <div class="card">
        <div class="card-title">ğŸŒ¾ feed purchase log</div>
        <p>18 Mar: 2.4t @ $580/t</p>
        <p>12 Mar: 3.0t @ $575/t</p>
        <p style="color:#6b8e4c;">ğŸ“Š optimal reorder: 3 days</p>
      </div>

      <!-- NEW: Expansion Trigger Engine Card -->
      <div class="card">
        <div class="card-title"><i class="fas fa-rocket gold-text"></i> expansion triggers</div>
        <div id="triggerSuggestions">
          <p>âœ… profit = $15,000 â†’ next: delivery vehicle at $40k</p>
          <p>ğŸš€ stock expansion at $60k profit</p>
        </div>
        <p class="badge">you are 62% toward vehicle trigger</p>
        <button class="btn-gold" style="margin-top:8px; width:100%;">customize triggers</button>
      </div>
    </div>

    <!-- BUDGET PANE -->
    <div class="tab-pane" id="budgetPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-coins gold-text"></i> P&L summary</div>
        <div class="cost-item"><span>ğŸ” chicken cost</span> <span>$21,400</span></div>
        <div class="cost-item"><span>ğŸŒ¾ feed cost</span> <span>$11,200</span></div>
        <div class="cost-item"><span>ğŸšš logistics</span> <span>$4,300</span></div>
        <div class="cost-item"><span>ğŸ‘©â€ğŸŒ¾ labor</span> <span>$6,500</span></div>
        <div class="cost-item" style="border-top:1px solid #333; margin-top:8px; padding-top:8px;">
          <span class="gold-text">ğŸ’° revenue</span> <span>$58,200</span>
        </div>
        <div class="cost-item"><span>ğŸ“ˆ profit margin</span> <span class="green-text">26% ($15,000)</span></div>
      </div>
      <div class="card">
        <div class="card-title">âš¡ optimization suggestions</div>
        <ul style="margin-left:20px; color:#ccc;">
          <li>ğŸ” batch B2402 has lowest mortality â€“ replicate conditions</li>
          <li>ğŸš› combine city deliveries to save 12% fuel</li>
          <li>ğŸŒ¾ buy feed before April price hike</li>
        </ul>
      </div>

      <!-- NEW: Cost Tracker Card -->
      <div class="card">
        <div class="card-title"><i class="fas fa-calculator gold-text"></i> monthly cost tracker</div>
        <div class="cost-input"><label>ğŸ¤ chicks purchased</label> <input type="number" id="chicksCost" value="21400" step="100"></div>
        <div class="cost-input"><label>ğŸŒ¾ feed cost</label> <input type="number" id="feedCost" value="11200" step="100"></div>
        <div class="cost-input"><label>ğŸšš transport</label> <input type="number" id="transportCost" value="4300" step="100"></div>
        <div class="cost-input"><label>ğŸ‘©â€ğŸŒ¾ labor</label> <input type="number" id="laborCost" value="6500" step="100"></div>
        <div class="cost-input"><label>âš¡ utilities</label> <input type="number" id="utilitiesCost" value="2100" step="100"></div>
        <div class="cost-input"><label>ğŸ”§ equipment</label> <input type="number" id="equipmentCost" value="900" step="100"></div>
        <div class="cost-input"><label>ğŸ’€ losses</label> <input type="number" id="lossesCost" value="600" step="100"></div>
        <hr>
        <div class="cost-item"><span>ğŸ“‰ total expenses</span> <span class="gold-text" id="totalExpenses">$48,200</span></div>
        <div class="cost-item"><span>ğŸ” cost per chicken</span> <span id="costPerChicken">$12.55</span></div>
      </div>

      <!-- NEW: Efficiency Monitor Card -->
      <div class="card">
        <div class="card-title"><i class="fas fa-gauge-high gold-text"></i> efficiency monitor</div>
        <div class="cost-item"><span>ğŸŒ¾ feed / chicken</span> <span>5.2 kg</span></div>
        <div class="cost-item"><span>ğŸ’€ death rate</span> <span>1.8%</span></div>
        <div class="cost-item"><span>ğŸ‘©â€ğŸŒ¾ labor cost / bird</span> <span>$2.10</span></div>
        <div class="cost-item"><span>ğŸ’° profit / worker</span> <span>$3,750</span></div>
        <p class="badge" style="margin-top:6px;">âš ï¸ feed usage above optimal</p>
      </div>
    </div>

    <!-- SETTINGS PANE -->
    <div class="tab-pane" id="settingsPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-sliders-h gold-text"></i> farm profile</div>
        <p><i class="fas fa-user"></i> Owner: Rana family</p>
        <p><i class="fas fa-location-dot"></i> Main farm + 1 expansion</p>
        <p><i class="fas fa-users"></i> Users: admin, brother, mother, driver</p>
        <hr>
        <p><i class="fas fa-cloud-sun"></i> multiâ€‘location ready</p>
        <p><i class="fas fa-qrcode"></i> QR batch scanning active</p>
        <button class="btn-gold" style="width:100%;"><i class="fas fa-link"></i> connect supabase</button>
      </div>

      <!-- NEW: Expansion Triggers Settings Card -->
      <div class="card">
        <div class="card-title"><i class="fas fa-gears gold-text"></i> expansion triggers (custom)</div>
        <div class="cost-input"><label>ğŸš› vehicle trigger ($)</label> <input type="number" id="vehicleTrigger" value="40000" step="1000"></div>
        <div class="cost-input"><label>ğŸ“¦ stock expansion ($)</label> <input type="number" id="stockTrigger" value="60000" step="1000"></div>
        <div class="cost-input"><label>ğŸ­ new farm ($)</label> <input type="number" id="farmTrigger" value="100000" step="1000"></div>
        <button class="btn-gold" style="margin-top:8px;">save triggers</button>
      </div>
    </div>
  </div>

  <!-- bottom navigation (6 items) -->
  <div class="bottom-nav">
    <div class="nav-item active" data-tab="dashboard"><i class="fas fa-chart-pie"></i><span>Home</span></div>
    <div class="nav-item" data-tab="inventory"><i class="fas fa-egg"></i><span>Stock</span></div>
    <div class="nav-item" data-tab="sales"><i class="fas fa-cash-register"></i><span>Sales</span></div>
    <div class="nav-item" data-tab="logistics"><i class="fas fa-truck"></i><span>Logistics</span></div>
    <div class="nav-item" data-tab="budget"><i class="fas fa-chart-line"></i><span>Budget</span></div>
    <div class="nav-item" data-tab="settings"><i class="fas fa-gear"></i><span>Settings</span></div>
  </div>
</div>

<script>
  (function() {
    // Tab switching logic (unchanged)
    const navItems = document.querySelectorAll('.nav-item');
    const panes = {
      dashboard: document.getElementById('dashboardPane'),
      inventory: document.getElementById('inventoryPane'),
      sales: document.getElementById('salesPane'),
      logistics: document.getElementById('logisticsPane'),
      budget: document.getElementById('budgetPane'),
      settings: document.getElementById('settingsPane')
    };

    function setActiveTab(tabId) {
      navItems.forEach(item => item.classList.remove('active'));
      Object.values(panes).forEach(pane => pane.classList.remove('active'));
      const activeNav = Array.from(navItems).find(item => item.dataset.tab === tabId);
      if (activeNav) activeNav.classList.add('active');
      if (panes[tabId]) panes[tabId].classList.add('active');
    }

    navItems.forEach(item => {
      item.addEventListener('click', (e) => {
        const tabId = item.dataset.tab;
        setActiveTab(tabId);
      });
    });

    // Keep existing button alerts
    const btns = document.querySelectorAll('.btn-gold');
    btns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        if (btn.innerText.includes('register') || btn.innerText.includes('add') || btn.innerText.includes('assign') || btn.innerText.includes('customize') || btn.innerText.includes('save')) {
          e.preventDefault();
          alert('âœ¨ This would open a form / save data. Backend ready (Supabase).');
        }
      });
    });

    // ---------- NEW BUSINESS INTELLIGENCE LOGIC ----------
    // References to dynamic fields
    const chicksInput = document.getElementById('chicksCost');
    const feedInput = document.getElementById('feedCost');
    const transportInput = document.getElementById('transportCost');
    const laborInput = document.getElementById('laborCost');
    const utilitiesInput = document.getElementById('utilitiesCost');
    const equipmentInput = document.getElementById('equipmentCost');
    const lossesInput = document.getElementById('lossesCost');

    const totalExpensesSpan = document.getElementById('totalExpenses');
    const costPerChickenSpan = document.getElementById('costPerChicken');
    const totalRevenueSpan = document.getElementById('totalRevenue');
    const revenuePerChickenSpan = document.getElementById('revenuePerChicken');
    const netMonthlySpan = document.getElementById('netMonthly');
    const profitPerChickenSpan = document.getElementById('profitPerChicken');
    const projectedProfitSpan = document.getElementById('projectedProfit');
    const profitTrendSpan = document.getElementById('profitTrend');
    const currentProfitLevelSpan = document.getElementById('currentProfitLevel');
    const gapText = document.getElementById('gapText');
    const profitGapFill = document.getElementById('profitGapFill');

    // Constants (mock revenue, chickens sold)
    const monthlyRevenue = 58200;   // from P&L
    const chickensSoldMonthly = 3840; // from sales pane "this month"

    function updateAll() {
      // Read cost inputs
      const chicks = parseFloat(chicksInput.value) || 0;
      const feed = parseFloat(feedInput.value) || 0;
      const transport = parseFloat(transportInput.value) || 0;
      const labor = parseFloat(laborInput.value) || 0;
      const utilities = parseFloat(utilitiesInput.value) || 0;
      const equipment = parseFloat(equipmentInput.value) || 0;
      const losses = parseFloat(lossesInput.value) || 0;

      const totalCost = chicks + feed + transport + labor + utilities + equipment + losses;
      totalExpensesSpan.innerText = '$' + totalCost.toLocaleString();

      const costPerChicken = totalCost / chickensSoldMonthly;
      costPerChickenSpan.innerText = '$' + costPerChicken.toFixed(2);

      // Revenue (from sales breakdown, but we use fixed for demo)
      totalRevenueSpan.innerText = '$' + monthlyRevenue.toLocaleString();
      const revenuePerChicken = monthlyRevenue / chickensSoldMonthly;
      revenuePerChickenSpan.innerText = '$' + revenuePerChicken.toFixed(2);

      // Net profit
      const netProfit = monthlyRevenue - totalCost;
      netMonthlySpan.innerText = '$' + netProfit.toLocaleString();
      const profitPerBird = netProfit / chickensSoldMonthly;
      profitPerChickenSpan.innerText = '$' + profitPerBird.toFixed(2);

      // Projection (simple 3x, could be modified by growth buttons)
      let baseProjection = netProfit * 3;
      projectedProfitSpan.innerText = '$' + baseProjection.toLocaleString();

      // Profit trend mock
      profitTrendSpan.innerHTML = '<i class="fas fa-arrow-up"></i> profit trend: +5.2% vs last month';

      // Growth checkpoint (R3 = 15k, R5 = 30k, etc.)
      const profitK = netProfit / 1000;
      let level = 'R1';
      if (profitK >= 50) level = 'R8';
      else if (profitK >= 30) level = 'R5';
      else if (profitK >= 15) level = 'R3';
      else level = 'R1';
      currentProfitLevelSpan.innerText = level + ' ($' + (profitK*1000).toLocaleString() + ')';

      // Next target: e.g., if at R3 (15k), next is R5 (30k)
      let nextTarget = 30000;
      if (profitK >= 30) nextTarget = 50000;
      if (profitK >= 50) nextTarget = 80000;
      const gap = nextTarget - netProfit;
      gapText.innerText = gap > 0 ? `gap to next level: $${gap.toLocaleString()}` : 'target reached!';
      const fillPercent = Math.min(100, (netProfit / nextTarget) * 100);
      profitGapFill.style.width = fillPercent + '%';

      // Expansion triggers (simple text update based on net profit)
      const vehicleTrigger = parseFloat(document.getElementById('vehicleTrigger').value) || 40000;
      const stockTrigger = parseFloat(document.getElementById('stockTrigger').value) || 60000;
      const farmTrigger = parseFloat(document.getElementById('farmTrigger').value) || 100000;
      let suggestions = '';
      if (netProfit >= farmTrigger) suggestions = 'âœ… new farm triggered!';
      else if (netProfit >= stockTrigger) suggestions = 'âœ… stock expansion triggered!';
      else if (netProfit >= vehicleTrigger) suggestions = 'âœ… delivery vehicle triggered!';
      else suggestions = `ğŸš€ next: vehicle at $${vehicleTrigger.toLocaleString()}`;
      document.getElementById('triggerSuggestions').innerHTML = `<p>${suggestions}</p>`;
    }

    // Attach input listeners
    const costInputs = [chicksInput, feedInput, transportInput, laborInput, utilitiesInput, equipmentInput, lossesInput];
    costInputs.forEach(inp => inp.addEventListener('input', updateAll));

    // Growth simulation buttons
    const growthBtns = document.querySelectorAll('[data-growth]');
    growthBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const growth = parseInt(btn.dataset.growth) / 100;
        const netProfit = parseFloat(netMonthlySpan.innerText.replace('$', '').replace(',', '')) || 15000;
        const projected = netProfit * 3 * (1 + growth);
        projectedProfitSpan.innerText = '$' + projected.toFixed(0).toLocaleString();
        document.getElementById('growthHint').innerText = `simulating +${btn.dataset.growth}% growth`;
      });
    });

    // Also update when trigger inputs change
    document.getElementById('vehicleTrigger').addEventListener('input', updateAll);
    document.getElementById('stockTrigger').addEventListener('input', updateAll);
    document.getElementById('farmTrigger').addEventListener('input', updateAll);

    // Initial update
    updateAll();

    console.log('Luxury Poultry Dashboard â€” BI modules added (cards only, existing content unchanged).');
  })();
</script>

<!-- backend ready note (unchanged, but extended with new tables) -->
<!-- 
  DATABASE (SUPABASE) tables expected:
  - inventory (id, batch_code, breed, purchase_date, initial_qty, deaths, available, expected_growth)
  - sales (id, date, quantity, price_per_unit, customer_type)
  - logistics (id, driver, vehicle, assignment, feed_purchases)
  - expenses (feed, labor, fuel, etc)
  - users (role, permissions)
  - analytics (pre-calculated KPIs)

  NEW TABLES FOR BI:
  - cost_tracker (month, chicks, feed, transport, labor, utilities, equipment, losses)
  - revenue_breakdown (month, live, prepared, bulk, byproducts, manure)
  - expansion_triggers (id, trigger_name, threshold, active)

  API endpoints would be built with DeepSeek backend, deployed to Railway.
  This frontend can be hosted on Netlify and connected via Supabase JS client.
-->
</body>
</html>