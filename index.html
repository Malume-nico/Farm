<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>POULTRY Â· luxury dashboard (ZAR)</title>
  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:opsz@14..32&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    body {
      background-color: #0a0a0a;
      color: #f0f0f0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    #app {
      width: 100%;
      max-width: 420px;
      height: 780px;
      background: #0f0f0f;
      border-radius: 32px;
      overflow: hidden;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(212, 175, 55, 0.2);
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .glass {
      background: rgba(30, 30, 30, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(212, 175, 55, 0.15);
      border-bottom: 1px solid rgba(212, 175, 55, 0.3);
      box-shadow: 0 8px 20px -6px rgba(0,0,0,0.6);
    }

    .header {
      padding: 18px 20px 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: transparent;
    }
    .header h1 {
      font-size: 1.6rem;
      font-weight: 500;
      letter-spacing: -0.5px;
      background: linear-gradient(135deg, #fff 0%, #d4af37 80%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .header i {
      font-size: 1.5rem;
      color: #d4af37;
      background: rgba(212, 175, 55, 0.1);
      padding: 10px;
      border-radius: 50%;
    }

    .main-content {
      flex: 1;
      overflow-y: auto;
      padding: 12px 16px 80px 16px;
      scrollbar-width: thin;
      scrollbar-color: #d4af37 #1e1e1e;
    }
    .main-content::-webkit-scrollbar {
      width: 4px;
    }
    .main-content::-webkit-scrollbar-track {
      background: #1e1e1e;
    }
    .main-content::-webkit-scrollbar-thumb {
      background: #d4af37;
      border-radius: 8px;
    }

    .bottom-nav {
      position: absolute;
      bottom: 0;
      width: 100%;
      max-width: 420px;
      display: flex;
      justify-content: space-around;
      align-items: center;
      background: rgba(10, 10, 10, 0.9);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border-top: 1px solid rgba(212, 175, 55, 0.3);
      padding: 8px 0 14px 0;
      z-index: 10;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #888;
      font-size: 0.7rem;
      transition: all 0.15s ease;
      cursor: pointer;
      padding: 6px 12px;
      border-radius: 30px;
      background: transparent;
    }
    .nav-item i {
      font-size: 1.5rem;
      margin-bottom: 2px;
    }
    .nav-item.active {
      color: #d4af37;
      background: rgba(212, 175, 55, 0.1);
      text-shadow: 0 0 8px #d4af3740;
    }

    .card {
      background: rgba(20, 20, 20, 0.6);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(212, 175, 55, 0.2);
      border-radius: 24px;
      padding: 18px 16px;
      margin-bottom: 16px;
      box-shadow: 0 10px 20px -10px black;
    }

    .card-title {
      font-size: 1rem;
      font-weight: 500;
      color: #d4af37;
      margin-bottom: 14px;
      letter-spacing: 0.3px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .stat {
      background: rgba(0, 0, 0, 0.4);
      border-radius: 18px;
      padding: 14px 12px;
      border-left: 3px solid #d4af37;
    }
    .stat-label {
      font-size: 0.75rem;
      color: #aaa;
      text-transform: uppercase;
      letter-spacing: 0.4px;
    }
    .stat-value {
      font-size: 1.5rem;
      font-weight: 600;
      color: white;
      line-height: 1.2;
    }
    .stat-sub {
      font-size: 0.8rem;
      color: #6b8e4c;
    }

    .badge {
      background: #6b8e4c20;
      border: 1px solid #6b8e4c;
      color: #b7d99e;
      padding: 4px 8px;
      border-radius: 40px;
      font-size: 0.7rem;
    }

    .batch-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #2a2a2a;
    }
    .batch-row:last-child { border: none; }
    .batch-info h4 { font-size: 1rem; font-weight: 500; }
    .batch-info p { font-size: 0.75rem; color: #aaa; }
    .batch-numbers { text-align: right; }
    .batch-numbers .quantity { color: #d4af37; font-weight: 600; }

    .btn-gold {
      background: #d4af3720;
      border: 1px solid #d4af37;
      color: #d4af37;
      border-radius: 40px;
      padding: 10px 18px;
      font-weight: 500;
      font-size: 0.9rem;
      width: fit-content;
      backdrop-filter: blur(4px);
      transition: 0.2s;
      cursor: pointer;
    }
    .btn-gold i { margin-right: 6px; }
    .btn-gold:active { background: #d4af3740; }

    .chart-bar {
      background: #2b2b2b;
      height: 8px;
      border-radius: 20px;
      margin: 8px 0;
    }
    .bar-fill {
      height: 8px;
      background: linear-gradient(90deg, #d4af37, #f5e085);
      border-radius: 20px;
      width: 0%;
    }

    .tab-pane { display: none; }
    .tab-pane.active { display: block; }

    .gold-text { color: #d4af37; }
    .green-text { color: #6b8e4c; }
    hr { border: 0.5px solid #2a2a2a; margin: 16px 0; }

    .cost-item { display: flex; justify-content: space-between; margin: 12px 0; font-size: 0.95rem; }
    .cost-input {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0;
    }
    .cost-input label {
      color: #ccc;
      font-size: 0.9rem;
    }
    .cost-input input {
      width: 100px;
      background: #2a2a2a;
      border: 1px solid #d4af3740;
      border-radius: 30px;
      padding: 8px 12px;
      color: #fff;
      font-size: 0.9rem;
      text-align: right;
    }
    .cost-input input:focus {
      outline: none;
      border-color: #d4af37;
    }
    .helper-text {
      font-size: 0.7rem;
      color: #aaa;
      margin-top: 4px;
    }
    .btn-small {
      background: transparent;
      border: 1px solid #d4af37;
      color: #d4af37;
      border-radius: 30px;
      padding: 6px 12px;
      font-size: 0.8rem;
      cursor: pointer;
      margin-right: 6px;
    }
    .btn-small.active {
      background: #d4af37;
      color: #0a0a0a;
    }
    .flex-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }
  </style>
</head>
<body>
<div id="app">
  <!-- header -->
  <div class="header">
    <h1>ğŸ” POULTRY</h1>
    <i class="fas fa-qrcode"></i>
  </div>

  <!-- main content area: tab panes -->
  <div class="main-content" id="mainContent">
    <!-- DASHBOARD PANE -->
    <div class="tab-pane active" id="dashboardPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-eye gold-text"></i> live overview</div>
        <div class="grid-2">
          <div class="stat"><span class="stat-label">chickens</span><div class="stat-value" id="totalBirdsDisplay">2,450</div><span class="stat-sub" id="birdsChange">+200 today</span></div>
          <div class="stat"><span class="stat-label">sold today</span><div class="stat-value" id="soldTodayDisplay">128</div><span class="stat-sub" id="revenueTodayDisplay">R 896</span></div>
          <div class="stat"><span class="stat-label">lost</span><div class="stat-value" id="lostTodayDisplay">12</div><span class="stat-sub">â¬‡ï¸ 0.5%</span></div>
          <div class="stat"><span class="stat-label">revenue today</span><div class="stat-value" id="revenueTodayValue">R 1,280</div><span class="stat-sub" id="revenueTodayPercent">+18%</span></div>
        </div>
        <div style="margin-top: 16px;">
          <div style="display: flex; justify-content: space-between;"><span>ğŸ“† monthly revenue</span> <strong class="gold-text" id="monthlyRevenueDisplay">R 324,480</strong></div>
          <div class="chart-bar" style="margin:6px 0 12px;"><div class="bar-fill" style="width:76%"></div></div>
          <div style="display: flex; justify-content: space-between;"><span>ğŸ” remaining stock</span> <strong id="remainingStockDisplay">2,322</strong></div>
          <div style="display: flex; justify-content: space-between;"><span>ğŸ“¦ upcoming batch</span> <strong>650 (in 4d)</strong></div>
          <hr>
          <div style="display: flex; justify-content: space-between; font-size: 1.1rem;"><span>ğŸ“ˆ net profit (month)</span> <strong class="green-text" id="netProfitMonthDisplay">R 86,400</strong></div>
        </div>
      </div>

      <!-- NEW KPI CARD (Admin) -->
      <div class="card">
        <div class="card-title"><i class="fas fa-gauge-high gold-text"></i> key performance indicators</div>
        <div class="grid-2">
          <div class="stat"><span class="stat-label">active birds</span><div class="stat-value" id="kpiActiveBirds">2,322</div></div>
          <div class="stat"><span class="stat-label">mortality %</span><div class="stat-value" id="kpiMortality">0.9%</div></div>
          <div class="stat"><span class="stat-label">avg selling price</span><div class="stat-value" id="kpiAvgPrice">R 84.50</div></div>
          <div class="stat"><span class="stat-label">cost / bird</span><div class="stat-value" id="kpiCostPerBird">R 62.00</div></div>
          <div class="stat"><span class="stat-label">subscription %</span><div class="stat-value" id="kpiSubPct">18%</div></div>
          <div class="stat"><span class="stat-label">byâ€‘product rev</span><div class="stat-value" id="kpiByproduct">R 12,750</div></div>
        </div>
      </div>

      <div class="card">
        <div class="card-title"><i class="fas fa-chart-line gold-text"></i> weekly trend</div>
        <div style="display: flex; gap: 10px; justify-content: space-between;">
          <span>M</span><span>T</span><span>W</span><span>T</span><span>F</span><span>S</span><span>S</span>
        </div>
        <div style="display: flex; gap: 8px; margin-top: 6px;">
          <div style="height: 40px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 30px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 50px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 36px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 60px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 44px; width: 12%; background: #d4af37; border-radius: 12px;"></div>
          <div style="height: 38px; width: 12%; background: #aaa; border-radius: 12px;"></div>
        </div>
        <p class="badge" style="margin-top: 12px;"><i class="fas-regular fa-truck"></i> expansion: new farm in Q3</p>
      </div>

      <!-- Net Profit & Projection Card (updated with ZAR) -->
      <div class="card" id="profitOverviewCard">
        <div class="card-title"><i class="fas fa-coins gold-text"></i> net profit & projection</div>
        <div class="grid-2">
          <div class="stat"><span class="stat-label">net monthly profit</span><div class="stat-value" id="netMonthly">R 86,400</div></div>
          <div class="stat"><span class="stat-label">profit / chicken</span><div class="stat-value" id="profitPerChicken">R 22.50</div></div>
        </div>
        <div style="display: flex; justify-content: space-between; margin: 8px 0;">
          <span>ğŸ“Š 3â€‘month projection</span>
          <strong class="gold-text" id="projectedProfit">R 259,200</strong>
        </div>
        <div class="flex-row" style="margin: 10px 0;">
          <button class="btn-small" data-growth="10">+10% growth</button>
          <button class="btn-small" data-growth="20">+20%</button>
          <button class="btn-small" data-growth="30">+30%</button>
          <span class="helper-text" id="growthHint">simulate</span>
        </div>
        <p class="badge" id="profitTrend"><i class="fas fa-arrow-up"></i> profit trend: +5.2% vs last month</p>
      </div>
    </div>

    <!-- INVENTORY PANE (mostly unchanged, but some dynamic values linked) -->
    <div class="tab-pane" id="inventoryPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-warehouse gold-text"></i> batch registration</div>
        <div class="batch-row">
          <div class="batch-info"><h4>#B2401 - Cornish</h4><p>purchased 12 Feb | 45 days</p></div>
          <div class="batch-numbers"><span class="quantity">820</span> / 850 <br> <span class="badge">lost 30</span></div>
        </div>
        <div class="batch-row">
          <div class="batch-info"><h4>#B2402 - Ross</h4><p>purchased 28 Feb | 32 days</p></div>
          <div class="batch-numbers"><span class="quantity">1,240</span> / 1,250 <br> <span class="badge">lost 10</span></div>
        </div>
        <div class="batch-row">
          <div class="batch-info"><h4>#B2403 - Free Range</h4><p>arriving 22 Mar</p></div>
          <div class="batch-numbers"><span class="quantity">0</span> / 600 <br> <span class="badge">upcoming</span></div>
        </div>
        <button class="btn-gold" style="margin-top: 16px; width:100%;"><i class="fas fa-plus"></i> register new batch</button>
        <p style="font-size:0.7rem; margin-top:12px;"><i class="fas fa-qrcode gold-text"></i> QR ready Â· scan to update deaths/sales</p>
      </div>
      <div class="card">
        <div class="card-title">âš°ï¸ death tracking (last 7d)</div>
        <p>Batch B2401: 12 deaths <span class="green-text">(-1.4%)</span></p>
        <p>Batch B2402: 8 deaths <span class="green-text">(-0.6%)</span></p>
        <p style="color:#d4af37;">recommend: check ventilation</p>
      </div>
      <div class="card">
        <div class="card-title"><i class="fas fa-flag-checkered gold-text"></i> growth checkpoint</div>
        <div style="display: flex; justify-content: space-between;">
          <span>current profit level:</span>
          <strong class="gold-text" id="currentProfitLevel">R3 (86.4k)</strong>
        </div>
        <div style="display: flex; justify-content: space-between;">
          <span>next target:</span>
          <strong id="nextTargetDisplay">R5 (150k)</strong>
        </div>
        <div class="chart-bar" style="margin:10px 0;"><div class="bar-fill" id="profitGapFill" style="width:57%"></div></div>
        <p id="gapText">gap to next level: R 63,600</p>
        <ul style="margin-left:20px; color:#ccc; font-size:0.9rem;">
          <li>âœ“ increase sales volume</li>
          <li>âœ“ reduce feed waste</li>
          <li>â†’ add subscriptions</li>
        </ul>
      </div>
    </div>

    <!-- SALES PANE (updated with ZAR and product mix) -->
    <div class="tab-pane" id="salesPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-dollar-sign gold-text"></i> today's sales</div>
        <div style="font-size: 2.2rem; font-weight:600;" id="todaySalesQty">128 <span style="font-size:1rem;">chickens</span></div>
        <p id="todaySalesAvgPrice">avg price R 84.50 â†’ <span id="todayRevenueCalc">R 10,816</span> revenue</p>
        <hr>
        <div style="display:flex; gap:10px;">
          <div><span class="stat-label">this month</span><div class="stat-value" id="monthlySold">3,840</div></div>
          <div><span class="stat-label">last month</span><div class="stat-value">3,210</div></div>
        </div>
        <button class="btn-gold" style="margin-top:16px;"><i class="fas fa-plus"></i> add manual sale</button>
      </div>

      <!-- NEW Product Mix Card -->
      <div class="card">
        <div class="card-title"><i class="fas fa-chart-pie gold-text"></i> product mix & pricing (ZAR)</div>
        <div class="cost-input"><label>ğŸ¥© wholesale (bulk) %</label> <input type="number" id="wholesalePct" value="68" min="0" max="100" step="1"></div>
        <div class="cost-input"><label>ğŸª retail (standard) %</label> <input type="number" id="retailPct" value="22" min="0" max="100" step="1"></div>
        <div class="cost-input"><label>ğŸ½ï¸ restaurant (premium) %</label> <input type="number" id="restaurantPct" value="10" min="0" max="100" step="1"></div>
        <div class="cost-item"><span>ğŸ“Š weighted avg price</span> <span class="gold-text" id="weightedAvgPrice">R 84.50</span></div>
        <div class="flex-row" style="margin-top:8px;">
          <span class="badge">live R100 | std R100 | prem R115 | bulk R75</span>
        </div>
        <div class="cost-input"><label>ğŸ” subscription discount %</label> <input type="number" id="subDiscount" value="6" min="0" max="100" step="0.5"></div>
        <div class="cost-input"><label>ğŸ¤ referral discount %</label> <input type="number" id="refDiscount" value="10" min="0" max="100" step="0.5"></div>
      </div>

      <div class="card">
        <div class="card-title"><i class="fas fa-chart-pie gold-text"></i> by customer type</div>
        <div>wholesale <span id="wholesaleVal">68</span>% <div class="chart-bar"><div class="bar-fill" style="width:68%"></div></div></div>
        <div>retail <span id="retailVal">22</span>% <div class="chart-bar"><div class="bar-fill" style="width:22%"></div></div></div>
        <div>restaurant <span id="restaurantVal">10</span>% <div class="chart-bar"><div class="bar-fill" style="width:10%"></div></div></div>
      </div>

      <!-- Revenue Breakdown Card (ZAR) -->
      <div class="card">
        <div class="card-title"><i class="fas fa-chart-simple gold-text"></i> revenue breakdown</div>
        <div class="cost-item"><span>ğŸ” live chickens</span> <span id="revLive">R 163,200</span></div>
        <div class="cost-item"><span>ğŸ— prepared</span> <span id="revPrep">R 41,200</span></div>
        <div class="cost-item"><span>ğŸ“¦ bulk</span> <span id="revBulk">R 97,920</span></div>
        <div class="cost-item"><span>ğŸ”„ byâ€‘products</span> <span id="revByproduct">R 12,750</span></div>
        <div class="cost-item"><span>ğŸŒ± manure sales</span> <span id="revManure">R 3,000</span></div>
        <div class="cost-item" style="border-top:1px solid #333;"><span>ğŸ’° total revenue</span> <span class="gold-text" id="totalRevenue">R 324,480</span></div>
        <div class="cost-item"><span>ğŸ” revenue / chicken</span> <span id="revenuePerChicken">R 84.50</span></div>
      </div>
    </div>

    <!-- LOGISTICS PANE -->
    <div class="tab-pane" id="logisticsPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-truck gold-text"></i> active deliveries</div>
        <div class="batch-row"><span>ğŸšš driver: Ahmed</span> <span class="badge">to city market</span></div>
        <div class="batch-row"><span>ğŸšš driver: Sara</span> <span class="badge">feed pickup</span></div>
        <div class="batch-row"><span>â›½ vehicle usage today</span> <span>54 km</span></div>
        <button class="btn-gold" style="width:100%;">assign new delivery</button>
      </div>
      <div class="card">
        <div class="card-title">ğŸŒ¾ feed purchase log</div>
        <p>18 Mar: 2.4t @ R580/t</p>
        <p>12 Mar: 3.0t @ R575/t</p>
        <p style="color:#6b8e4c;">ğŸ“Š optimal reorder: 3 days</p>
      </div>

      <!-- NEW Feed Forecast Card -->
      <div class="card">
        <div class="card-title"><i class="fas fa-calculator gold-text"></i> feed forecast (month)</div>
        <div class="cost-item"><span>ğŸŒ¾ total feed req.</span> <span id="totalFeedKg">11,025 kg</span></div>
        <div class="cost-item"><span>ğŸ›ï¸ bags (50kg)</span> <span id="feedBags">221 bags</span></div>
        <div class="cost-item"><span>ğŸ’° estimated cost</span> <span id="feedCostEstimate">R 85,085</span></div>
      </div>

      <div class="card">
        <div class="card-title"><i class="fas fa-rocket gold-text"></i> expansion triggers</div>
        <div id="triggerSuggestions"><p>ğŸš€ next: vehicle at R40,000</p></div>
        <p class="badge" id="triggerProgress">you are 216% toward vehicle trigger</p>
        <button class="btn-gold" style="margin-top:8px; width:100%;">customize triggers</button>
      </div>
    </div>

    <!-- BUDGET PANE (cost tracker + adjustable cost per bird) -->
    <div class="tab-pane" id="budgetPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-coins gold-text"></i> P&L summary (ZAR)</div>
        <div class="cost-item"><span>ğŸ” chicken cost</span> <span id="plChickens">R 34,300</span></div>
        <div class="cost-item"><span>ğŸŒ¾ feed cost</span> <span id="plFeed">R 85,085</span></div>
        <div class="cost-item"><span>ğŸšš logistics</span> <span id="plLogistics">R 4,300</span></div>
        <div class="cost-item"><span>ğŸ‘©â€ğŸŒ¾ labor</span> <span id="plLabor">R 6,500</span></div>
        <div class="cost-item" style="border-top:1px solid #333; margin-top:8px; padding-top:8px;">
          <span class="gold-text">ğŸ’° revenue</span> <span id="plRevenue">R 324,480</span>
        </div>
        <div class="cost-item"><span>ğŸ“ˆ profit margin</span> <span class="green-text" id="plMargin">26.6% (R 86,400)</span></div>
      </div>

      <!-- Monthly cost tracker + adjustable cost per bird -->
      <div class="card">
        <div class="card-title"><i class="fas fa-calculator gold-text"></i> monthly cost tracker</div>
        <div class="cost-input"><label>ğŸ¤ chicks purchased</label> <input type="number" id="chicksCost" value="34300" step="100"></div>
        <div class="cost-input"><label>ğŸŒ¾ feed cost</label> <input type="number" id="feedCost" value="85085" step="100"></div>
        <div class="cost-input"><label>ğŸšš transport</label> <input type="number" id="transportCost" value="4300" step="100"></div>
        <div class="cost-input"><label>ğŸ‘©â€ğŸŒ¾ labor</label> <input type="number" id="laborCost" value="6500" step="100"></div>
        <div class="cost-input"><label>âš¡ utilities</label> <input type="number" id="utilitiesCost" value="2100" step="100"></div>
        <div class="cost-input"><label>ğŸ”§ equipment</label> <input type="number" id="equipmentCost" value="900" step="100"></div>
        <div class="cost-input"><label>ğŸ’€ losses</label> <input type="number" id="lossesCost" value="600" step="100"></div>
        <hr>
        <div class="cost-input"><label>ğŸ” adjustable cost/bird</label> <input type="number" id="adjustableCostPerBird" value="62" step="0.5"></div>
        <div class="cost-item"><span>ğŸ“‰ total expenses</span> <span class="gold-text" id="totalExpenses">R 133,785</span></div>
        <div class="cost-item"><span>ğŸ” cost per chicken</span> <span id="costPerChicken">R 34.84</span></div>
      </div>

      <div class="card">
        <div class="card-title">âš¡ optimization suggestions</div>
        <ul style="margin-left:20px; color:#ccc;">
          <li>ğŸ” batch B2402 has lowest mortality â€“ replicate conditions</li>
          <li>ğŸš› combine city deliveries to save 12% fuel</li>
          <li>ğŸŒ¾ buy feed before April price hike</li>
        </ul>
      </div>

      <!-- Efficiency monitor (updated with ZAR) -->
      <div class="card">
        <div class="card-title"><i class="fas fa-gauge-high gold-text"></i> efficiency monitor</div>
        <div class="cost-item"><span>ğŸŒ¾ feed / chicken</span> <span>4.5 kg</span></div>
        <div class="cost-item"><span>ğŸ’€ death rate</span> <span id="deathRateDisplay">0.9%</span></div>
        <div class="cost-item"><span>ğŸ‘©â€ğŸŒ¾ labor cost / bird</span> <span id="laborPerBird">R 1.69</span></div>
        <div class="cost-item"><span>ğŸ’° profit / worker</span> <span id="profitPerWorker">R 28,800</span></div>
        <p class="badge" style="margin-top:6px;">âš ï¸ feed usage above optimal</p>
      </div>
    </div>

    <!-- SETTINGS PANE (trigger thresholds) -->
    <div class="tab-pane" id="settingsPane">
      <div class="card">
        <div class="card-title"><i class="fas fa-sliders-h gold-text"></i> farm profile</div>
        <p><i class="fas fa-user"></i> Owner: Rana family</p>
        <p><i class="fas fa-location-dot"></i> Main farm + 1 expansion</p>
        <p><i class="fas fa-users"></i> Users: admin, brother, mother, driver</p>
        <hr>
        <p><i class="fas fa-cloud-sun"></i> multiâ€‘location ready</p>
        <p><i class="fas fa-qrcode"></i> QR batch scanning active</p>
        <button class="btn-gold" style="width:100%;"><i class="fas fa-link"></i> connect supabase</button>
      </div>

      <div class="card">
        <div class="card-title"><i class="fas fa-gears gold-text"></i> expansion triggers (ZAR)</div>
        <div class="cost-input"><label>ğŸš› vehicle trigger</label> <input type="number" id="vehicleTrigger" value="40000" step="1000"></div>
        <div class="cost-input"><label>ğŸ“¦ stock expansion</label> <input type="number" id="stockTrigger" value="60000" step="1000"></div>
        <div class="cost-input"><label>ğŸ­ new farm</label> <input type="number" id="farmTrigger" value="100000" step="1000"></div>
        <button class="btn-gold" style="margin-top:8px;">save triggers</button>
      </div>

      <!-- by-product toggle -->
      <div class="card">
        <div class="card-title"><i class="fas fa-toggle-on gold-text"></i> byâ€‘product settings</div>
        <div class="cost-input"><label>ğŸ’© byâ€‘product rev/bird</label> <input type="number" id="byproductPerBird" value="85" step="5"></div>
        <div class="flex-row"><span class="badge">applies to standard/bulk</span></div>
      </div>
    </div>
  </div>

  <!-- bottom navigation (6 items) -->
  <div class="bottom-nav">
    <div class="nav-item active" data-tab="dashboard"><i class="fas fa-chart-pie"></i><span>Home</span></div>
    <div class="nav-item" data-tab="inventory"><i class="fas fa-egg"></i><span>Stock</span></div>
    <div class="nav-item" data-tab="sales"><i class="fas fa-cash-register"></i><span>Sales</span></div>
    <div class="nav-item" data-tab="logistics"><i class="fas fa-truck"></i><span>Logistics</span></div>
    <div class="nav-item" data-tab="budget"><i class="fas fa-chart-line"></i><span>Budget</span></div>
    <div class="nav-item" data-tab="settings"><i class="fas fa-gear"></i><span>Settings</span></div>
  </div>
</div>

<script>
  (function() {
    // Tab switching logic
    const navItems = document.querySelectorAll('.nav-item');
    const panes = {
      dashboard: document.getElementById('dashboardPane'),
      inventory: document.getElementById('inventoryPane'),
      sales: document.getElementById('salesPane'),
      logistics: document.getElementById('logisticsPane'),
      budget: document.getElementById('budgetPane'),
      settings: document.getElementById('settingsPane')
    };

    function setActiveTab(tabId) {
      navItems.forEach(item => item.classList.remove('active'));
      Object.values(panes).forEach(pane => pane.classList.remove('active'));
      const activeNav = Array.from(navItems).find(item => item.dataset.tab === tabId);
      if (activeNav) activeNav.classList.add('active');
      if (panes[tabId]) panes[tabId].classList.add('active');
    }

    navItems.forEach(item => {
      item.addEventListener('click', (e) => {
        const tabId = item.dataset.tab;
        setActiveTab(tabId);
      });
    });

    // Keep existing button alerts (minor)
    const btns = document.querySelectorAll('.btn-gold');
    btns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        if (btn.innerText.includes('register') || btn.innerText.includes('add') || btn.innerText.includes('assign') || btn.innerText.includes('customize') || btn.innerText.includes('save')) {
          e.preventDefault();
          alert('âœ¨ This would open a form / save data. Backend ready (Supabase).');
        }
      });
    });

    // ---------- BUSINESS INTELLIGENCE LOGIC (ZAR, dynamic) ----------
    // Constants / base values
    const TOTAL_BIRDS = 2450;          // from dashboard
    const SOLD_TODAY = 128;
    const MONTHLY_SOLD = 3840;          // sales pane "this month"
    const MORTALITY_RATE = 0.009;       // 0.9% (from death tracking)
    const BYPRODUCT_PER_BIRD_DEFAULT = 85;

    // Input references
    const chicksInput = document.getElementById('chicksCost');
    const feedInput = document.getElementById('feedCost');
    const transportInput = document.getElementById('transportCost');
    const laborInput = document.getElementById('laborCost');
    const utilitiesInput = document.getElementById('utilitiesCost');
    const equipmentInput = document.getElementById('equipmentCost');
    const lossesInput = document.getElementById('lossesCost');
    const adjustableCostPerBird = document.getElementById('adjustableCostPerBird');

    // Product mix inputs
    const wholesalePct = document.getElementById('wholesalePct');
    const retailPct = document.getElementById('retailPct');
    const restaurantPct = document.getElementById('restaurantPct');
    const subDiscount = document.getElementById('subDiscount');
    const refDiscount = document.getElementById('refDiscount');
    const byproductPerBirdInput = document.getElementById('byproductPerBird');

    // Trigger inputs
    const vehicleTrigger = document.getElementById('vehicleTrigger');
    const stockTrigger = document.getElementById('stockTrigger');
    const farmTrigger = document.getElementById('farmTrigger');

    // Fixed prices (ZAR)
    const PRICE_LIVE = 100;
    const PRICE_STANDARD = 100;
    const PRICE_PREMIUM = 115;
    const PRICE_BULK = 75;

    // Helper to compute weighted average selling price
    function computeAvgPrice() {
      let wp = parseFloat(wholesalePct.value) || 0;
      let rp = parseFloat(retailPct.value) || 0;
      let rest = parseFloat(restaurantPct.value) || 0;
      let total = wp + rp + rest;
      if (total === 0) return 84.5; // fallback
      let avg = (wp * PRICE_BULK + rp * PRICE_STANDARD + rest * PRICE_PREMIUM) / total;
      return avg;
    }

    // Get byâ€‘product revenue
    function getByproductRevenue() {
      let byPerBird = parseFloat(byproductPerBirdInput.value) || BYPRODUCT_PER_BIRD_DEFAULT;
      // Assume standard + bulk = wholesale + retail percent (together)
      let wp = parseFloat(wholesalePct.value) || 68;
      let rp = parseFloat(retailPct.value) || 22;
      let applicableBirds = MONTHLY_SOLD * (wp + rp) / 100;
      return applicableBirds * byPerBird;
    }

    // Main update function
    function updateAll() {
      // Read cost inputs
      const chicks = parseFloat(chicksInput.value) || 0;
      const feed = parseFloat(feedInput.value) || 0;
      const transport = parseFloat(transportInput.value) || 0;
      const labor = parseFloat(laborInput.value) || 0;
      const utilities = parseFloat(utilitiesInput.value) || 0;
      const equipment = parseFloat(equipmentInput.value) || 0;
      const losses = parseFloat(lossesInput.value) || 0;
      const totalCost = chicks + feed + transport + labor + utilities + equipment + losses;

      // Adjustable cost per bird
      const adjCostPerBird = parseFloat(adjustableCostPerBird.value) || 62;
      // Override: we can show it but not force total cost? We'll keep both.

      // Weighted average price
      const avgPrice = computeAvgPrice();
      const byproductRev = getByproductRevenue();

      // Revenue calculations
      const monthlyRevenue = MONTHLY_SOLD * avgPrice;
      const revenueToday = SOLD_TODAY * avgPrice;
      const totalRevenue = monthlyRevenue; // plus byproduct? we add separately
      const revenueLive = MONTHLY_SOLD * (parseFloat(wholesalePct.value)/100) * PRICE_BULK; // bulk as live?
      const revenuePrep = MONTHLY_SOLD * (parseFloat(retailPct.value)/100) * PRICE_STANDARD;
      const revenueBulk = MONTHLY_SOLD * (parseFloat(restaurantPct.value)/100) * PRICE_PREMIUM;
      // byproduct already computed

      // Net profit
      const netProfit = monthlyRevenue + byproductRev - totalCost;

      // Update text fields (ZAR formatting)
      document.getElementById('totalRevenue').innerText = 'R ' + (monthlyRevenue + byproductRev).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('revenuePerChicken').innerText = 'R ' + avgPrice.toFixed(2);
      document.getElementById('monthlyRevenueDisplay').innerText = 'R ' + (monthlyRevenue + byproductRev).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('revenueTodayValue').innerText = 'R ' + revenueToday.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('revenueTodayDisplay').innerText = 'R ' + revenueToday.toFixed(0);
      document.getElementById('netMonthly').innerText = 'R ' + netProfit.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('profitPerChicken').innerText = 'R ' + (netProfit / MONTHLY_SOLD).toFixed(2);
      document.getElementById('weightedAvgPrice').innerText = 'R ' + avgPrice.toFixed(2);
      document.getElementById('todaySalesAvgPrice').innerHTML = `avg price R ${avgPrice.toFixed(2)} â†’ <span id="todayRevenueCalc">R ${revenueToday.toFixed(0)}</span> revenue`;
      document.getElementById('todayRevenueCalc').innerText = 'R ' + revenueToday.toFixed(0);
      document.getElementById('totalExpenses').innerText = 'R ' + totalCost.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('costPerChicken').innerText = 'R ' + (totalCost / MONTHLY_SOLD).toFixed(2);

      // Revenue breakdown
      document.getElementById('revLive').innerText = 'R ' + revenueLive.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('revPrep').innerText = 'R ' + revenuePrep.toFixed(0);
      document.getElementById('revBulk').innerText = 'R ' + revenueBulk.toFixed(0);
      document.getElementById('revByproduct').innerText = 'R ' + byproductRev.toFixed(0);
      document.getElementById('revManure').innerText = 'R 3,000'; // static

      // KPIs
      document.getElementById('kpiActiveBirds').innerText = (TOTAL_BIRDS * (1 - MORTALITY_RATE)).toFixed(0);
      document.getElementById('kpiMortality').innerText = (MORTALITY_RATE * 100).toFixed(1) + '%';
      document.getElementById('kpiAvgPrice').innerText = 'R ' + avgPrice.toFixed(2);
      document.getElementById('kpiCostPerBird').innerText = 'R ' + adjCostPerBird.toFixed(2);
      // subscription % mock
      document.getElementById('kpiSubPct').innerText = '18%';
      document.getElementById('kpiByproduct').innerText = 'R ' + byproductRev.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');

      // P&L summary
      document.getElementById('plChickens').innerText = 'R ' + chicks.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      document.getElementById('plFeed').innerText = 'R ' + feed.toFixed(0);
      document.getElementById('plLogistics').innerText = 'R ' + transport.toFixed(0);
      document.getElementById('plLabor').innerText = 'R ' + labor.toFixed(0);
      document.getElementById('plRevenue').innerText = 'R ' + (monthlyRevenue + byproductRev).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      const margin = ((netProfit) / (monthlyRevenue + byproductRev) * 100).toFixed(1);
      document.getElementById('plMargin').innerHTML = `${margin}% (R ${netProfit.toFixed(0)})`;

      // Profit projection & growth checkpoint
      const netProfitNum = netProfit;
      document.getElementById('projectedProfit').innerText = 'R ' + (netProfitNum * 3).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      let level = 'R1';
      if (netProfitNum >= 80000) level = 'R5 (80k+)';
      else if (netProfitNum >= 50000) level = 'R4 (50k)';
      else if (netProfitNum >= 30000) level = 'R3 (30k)';
      else level = 'R2 (15k)';
      document.getElementById('currentProfitLevel').innerText = level;

      let nextTarget = 150000;
      if (netProfitNum < 30000) nextTarget = 30000;
      else if (netProfitNum < 50000) nextTarget = 50000;
      else if (netProfitNum < 80000) nextTarget = 80000;
      else nextTarget = 150000;
      document.getElementById('nextTargetDisplay').innerText = 'R ' + nextTarget.toLocaleString();
      const gap = nextTarget - netProfitNum;
      document.getElementById('gapText').innerText = gap > 0 ? `gap to next level: R ${gap.toLocaleString()}` : 'target reached!';
      const fillPercent = Math.min(100, (netProfitNum / nextTarget) * 100);
      document.getElementById('profitGapFill').style.width = fillPercent + '%';

      // Feed forecast
      const feedPerBird = 4.5; // kg
      const totalFeedKg = TOTAL_BIRDS * feedPerBird;
      const bags = totalFeedKg / 50;
      const feedCostEst = bags * 385; // R385 per bag
      document.getElementById('totalFeedKg').innerText = totalFeedKg.toFixed(0) + ' kg';
      document.getElementById('feedBags').innerText = Math.ceil(bags) + ' bags';
      document.getElementById('feedCostEstimate').innerText = 'R ' + feedCostEst.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');

      // Expansion triggers
      const vTrigger = parseFloat(vehicleTrigger.value) || 40000;
      const sTrigger = parseFloat(stockTrigger.value) || 60000;
      const fTrigger = parseFloat(farmTrigger.value) || 100000;
      let triggerMsg = '';
      if (netProfitNum >= fTrigger) triggerMsg = 'âœ… new farm triggered!';
      else if (netProfitNum >= sTrigger) triggerMsg = 'âœ… stock expansion triggered!';
      else if (netProfitNum >= vTrigger) triggerMsg = 'âœ… delivery vehicle triggered!';
      else triggerMsg = `ğŸš€ next: vehicle at R ${vTrigger.toLocaleString()}`;
      document.getElementById('triggerSuggestions').innerHTML = `<p>${triggerMsg}</p>`;
      document.getElementById('triggerProgress').innerText = `you are ${((netProfitNum/vTrigger)*100).toFixed(0)}% toward vehicle trigger`;

      // Efficiency monitor
      document.getElementById('deathRateDisplay').innerText = (MORTALITY_RATE * 100).toFixed(1) + '%';
      document.getElementById('laborPerBird').innerText = 'R ' + (labor / TOTAL_BIRDS).toFixed(2);
      document.getElementById('profitPerWorker').innerText = 'R ' + (netProfit / 3).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');

      // Sales pane percentages
      document.getElementById('wholesaleVal').innerText = wholesalePct.value;
      document.getElementById('retailVal').innerText = retailPct.value;
      document.getElementById('restaurantVal').innerText = restaurantPct.value;
    }

    // Attach listeners
    const costInputs = [chicksInput, feedInput, transportInput, laborInput, utilitiesInput, equipmentInput, lossesInput, adjustableCostPerBird, wholesalePct, retailPct, restaurantPct, subDiscount, refDiscount, byproductPerBirdInput, vehicleTrigger, stockTrigger, farmTrigger];
    costInputs.forEach(inp => inp.addEventListener('input', updateAll));

    // Growth simulation buttons
    const growthBtns = document.querySelectorAll('[data-growth]');
    growthBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const growth = parseInt(btn.dataset.growth) / 100;
        const netProfit = parseFloat(document.getElementById('netMonthly').innerText.replace('R', '').replace(',', '')) || 86400;
        const projected = netProfit * 3 * (1 + growth);
        document.getElementById('projectedProfit').innerText = 'R ' + projected.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        document.getElementById('growthHint').innerText = `simulating +${btn.dataset.growth}% growth`;
      });
    });

    // initial update
    updateAll();

    console.log('Luxury Poultry Dashboard â€” ZAR currency, dynamic pricing, cost model integrated.');
  })();
</script>

<!-- backend notes updated -->
<!-- 
  DATABASE (SUPABASE) tables extended:
  - cost_tracker (month, chicks, feed, transport, labor, utilities, equipment, losses, adjustable_cost_per_bird)
  - product_mix (wholesale_pct, retail_pct, restaurant_pct, sub_discount, ref_discount)
  - byproduct_settings (revenue_per_bird)
  - expansion_triggers (vehicle, stock, farm)
-->
</body>
</html>